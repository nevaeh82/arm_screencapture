if(QSERIAL_INCLUDE_DIR AND QSERIAL_LIBRARY)
	set(QSERIAL_FIND_QUIETLY TRUE)
endif(QSERIAL_INCLUDE_DIR AND QSERIAL_LIBRARY)

find_library(QSERIAL_LIBRARY qserialdevice
	PATHS ${PROJECT_BASE_DIR}/redist/qserialdevice/lib_${SPEC})

find_path(QSERIAL_INCLUDE_DIR qserialdevice_global.h
	PATHS ${PROJECT_BASE_DIR}/redist/qserialdevice/include)

if (WIN32)
	set(QSERIAL_LIBRARY ${QSERIAL_LIBRARY} -lsetupapi)
elseif(UNIX)
	if (NOT UDEV_LIBRARY)
		find_library(UDEV_LIBRARY udev)
	endif()
	set(QSERIAL_LIBRARY ${QSERIAL_LIBRARY} ${UDEV_LIBRARY})
endif ()

INCLUDE(FindPackageHandleStandardArgs)
FIND_PACKAGE_HANDLE_STANDARD_ARGS(QSerialDevice DEFAULT_MSG QSERIAL_LIBRARY QSERIAL_INCLUDE_DIR)

MARK_AS_ADVANCED(
	QSERIAL_INCLUDE_DIR
	QSERIAL_LIBRARY
)
